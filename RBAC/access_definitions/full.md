# What is this document? 

This document is meant to provide a clear definition of what "Read" access means in this data project. This definition will be expressed both in plain english and as executable SQL Statements.

## Context

This project applies Role-based Access Control (RBAC) by creating a series of *access roles*, each of which apply to a specific schema. An access role creates the its holder with Read Access, Read-Write Access, or Full access, to the given schema.

So if you had one schema caleld `EDW_DB.RAW`, for example, you could have three access roles for that:
1. `EDW_DB_RAW_R_AR` ("Read" access role)
1. `EDW_DB_RAW_RW_AR` ("Read-Write" access role)
1. `EDW_DB_RAW_FULL_AR` ("Full" access role)

Each of these roles are combined to create *Functional Roles* (ex. `DEV_ENGINEER_FR`), which can have complex and highly-configurable privileges. The flexibility these roles have comes out of the ability to grant (or withhold granting) many access roles to the functional role. 

# "Read" Access: Plain-Language Definition

A) "Read" access means you generally have the ability to read from or use existing objects, but you may not alter existing objects in any way. You also may not create new objects of your own.  

B) As with all access on this Data Project, access is granted at the **schema level**. So, anyone with "Read" access will have that acces in the context of a specific schema.

Unlike with Read-write access, there are not many fine details with this definition. So long as an object exists within a schema, and you have "Read" access on that schema, you can read from or use any existing object without altering it.

# "Read" Access: SQL Definition

```
-- Create and Grant Privileges to Access Role DEV_EDW_DB_MODEL_FULL_AR
USE ROLE USERADMIN;

-- Instantiate role and the environment SYSADMIN's inheritance of it
CREATE ROLE IF NOT EXISTS "DEV_EDW_DB_MODEL_FULL_AR";
GRANT ROLE "DEV_EDW_DB_MODEL_FULL_AR" TO ROLE "DEV_SYSADMIN";

USE ROLE SECURITYADMIN;

-- Schema access
GRANT USAGE ON DATABASE "DEV_EDW_DB" TO ROLE "DEV_EDW_DB_MODEL_FULL_AR";
GRANT USAGE ON SCHEMA "DEV_EDW_DB"."MODEL" TO ROLE "DEV_EDW_DB_MODEL_FULL_AR";

-- Table access
GRANT OWNERSHIP ON ALL TABLES IN SCHEMA "DEV_EDW_DB"."MODEL" TO ROLE "DEV_EDW_DB_MODEL_FULL_AR" COPY CURRENT GRANTS;
GRANT OWNERSHIP ON FUTURE TABLES IN SCHEMA "DEV_EDW_DB"."MODEL" TO ROLE "DEV_EDW_DB_MODEL_FULL_AR";

-- View access
GRANT OWNERSHIP ON ALL VIEWS IN SCHEMA "DEV_EDW_DB"."MODEL" TO ROLE "DEV_EDW_DB_MODEL_FULL_AR" COPY CURRENT GRANTS;
GRANT OWNERSHIP ON FUTURE VIEWS IN SCHEMA "DEV_EDW_DB"."MODEL" TO ROLE "DEV_EDW_DB_MODEL_FULL_AR";
GRANT OWNERSHIP ON ALL MATERIALIZED VIEWS IN SCHEMA "DEV_EDW_DB"."MODEL" TO ROLE "DEV_EDW_DB_MODEL_FULL_AR" COPY CURRENT GRANTS;
GRANT OWNERSHIP ON FUTURE MATERIALIZED VIEWS IN SCHEMA "DEV_EDW_DB"."MODEL" TO ROLE "DEV_EDW_DB_MODEL_FULL_AR";
GRANT INSERT ON ALL TABLES IN SCHEMA "DEV_EDW_DB"."MODEL" TO ROLE "DEV_EDW_DB_MODEL_FULL_AR";
GRANT UPDATE ON ALL TABLES IN SCHEMA "DEV_EDW_DB"."MODEL" TO ROLE "DEV_EDW_DB_MODEL_FULL_AR";
GRANT DELETE ON ALL TABLES IN SCHEMA "DEV_EDW_DB"."MODEL" TO ROLE "DEV_EDW_DB_MODEL_FULL_AR";
GRANT REFERENCES ON ALL TABLES IN SCHEMA "DEV_EDW_DB"."MODEL" TO ROLE "DEV_EDW_DB_MODEL_FULL_AR";
GRANT INSERT ON FUTURE TABLES IN SCHEMA "DEV_EDW_DB"."MODEL" TO ROLE "DEV_EDW_DB_MODEL_FULL_AR";
GRANT UPDATE ON FUTURE TABLES IN SCHEMA "DEV_EDW_DB"."MODEL" TO ROLE "DEV_EDW_DB_MODEL_FULL_AR";
GRANT DELETE ON FUTURE TABLES IN SCHEMA "DEV_EDW_DB"."MODEL" TO ROLE "DEV_EDW_DB_MODEL_FULL_AR";
GRANT REFERENCES ON FUTURE TABLES IN SCHEMA "DEV_EDW_DB"."MODEL" TO ROLE "DEV_EDW_DB_MODEL_FULL_AR";


-- Sequence access
GRANT OWNERSHIP ON ALL SEQUENCES IN SCHEMA "DEV_EDW_DB"."MODEL" TO ROLE "DEV_EDW_DB_MODEL_FULL_AR" COPY CURRENT GRANTS;
GRANT OWNERSHIP ON FUTURE SEQUENCES IN SCHEMA "DEV_EDW_DB"."MODEL" TO ROLE "DEV_EDW_DB_MODEL_FULL_AR";

-- Stage access
GRANT OWNERSHIP ON ALL STAGES IN SCHEMA "DEV_EDW_DB"."MODEL" TO ROLE "DEV_EDW_DB_MODEL_FULL_AR" COPY CURRENT GRANTS;
GRANT OWNERSHIP ON FUTURE STAGES IN SCHEMA "DEV_EDW_DB"."MODEL" TO ROLE "DEV_EDW_DB_MODEL_FULL_AR";
GRANT WRITE ON FUTURE STAGES IN SCHEMA "DEV_EDW_DB"."MODEL" TO ROLE "DEV_EDW_DB_MODEL_FULL_AR";
GRANT WRITE ON ALL STAGES IN SCHEMA "DEV_EDW_DB"."MODEL" TO ROLE "DEV_EDW_DB_MODEL_FULL_AR";

-- File format access
GRANT OWNERSHIP ON ALL FILE FORMATS IN SCHEMA "DEV_EDW_DB"."MODEL" TO ROLE "DEV_EDW_DB_MODEL_FULL_AR" COPY CURRENT GRANTS;
GRANT OWNERSHIP ON FUTURE FILE FORMATS IN SCHEMA "DEV_EDW_DB"."MODEL" TO ROLE "DEV_EDW_DB_MODEL_FULL_AR";

-- Stream access
GRANT OWNERSHIP ON ALL STREAMS IN SCHEMA "DEV_EDW_DB"."MODEL" TO ROLE "DEV_EDW_DB_MODEL_FULL_AR" COPY CURRENT GRANTS;
GRANT OWNERSHIP ON FUTURE STREAMS IN SCHEMA "DEV_EDW_DB"."MODEL" TO ROLE "DEV_EDW_DB_MODEL_FULL_AR";

-- Sproc access
GRANT OWNERSHIP ON ALL PROCEDURES IN SCHEMA "DEV_EDW_DB"."MODEL" TO ROLE "DEV_EDW_DB_MODEL_FULL_AR" COPY CURRENT GRANTS;
GRANT OWNERSHIP ON FUTURE PROCEDURES IN SCHEMA "DEV_EDW_DB"."MODEL" TO ROLE "DEV_EDW_DB_MODEL_FULL_AR";

-- UDF Access
GRANT OWNERSHIP ON ALL FUNCTIONS IN SCHEMA "DEV_EDW_DB"."MODEL" TO ROLE "DEV_EDW_DB_MODEL_FULL_AR" COPY CURRENT GRANTS;
GRANT OWNERSHIP ON FUTURE FUNCTIONS IN SCHEMA "DEV_EDW_DB"."MODEL" TO ROLE "DEV_EDW_DB_MODEL_FULL_AR";

-- Task access
GRANT OWNERSHIP ON ALL TASKS IN SCHEMA "DEV_EDW_DB"."MODEL" TO ROLE "DEV_EDW_DB_MODEL_FULL_AR" COPY CURRENT GRANTS;
GRANT OWNERSHIP ON FUTURE TASKS IN SCHEMA "DEV_EDW_DB"."MODEL" TO ROLE "DEV_EDW_DB_MODEL_FULL_AR";
GRANT MONITOR ON ALL TASKS IN SCHEMA "DEV_EDW_DB"."MODEL" TO ROLE "DEV_EDW_DB_MODEL_FULL_AR";
GRANT OPERATE ON ALL TASKS IN SCHEMA "DEV_EDW_DB"."MODEL" TO ROLE "DEV_EDW_DB_MODEL_FULL_AR";
GRANT MONITOR ON FUTURE TASKS IN SCHEMA "DEV_EDW_DB"."MODEL" TO ROLE "DEV_EDW_DB_MODEL_FULL_AR";
GRANT OPERATE ON FUTURE TASKS IN SCHEMA "DEV_EDW_DB"."MODEL" TO ROLE "DEV_EDW_DB_MODEL_FULL_AR";
```
